# MSC drawn from file 'trace.log'

VMC,Coin_acceptor,Coin_dispenser_1,Display,Keypad,Motor,Drop_sensor;

VMC--:Additional stuff;
VMC--:Hi, Zoltan. The next banner will be very long and need to be wrapped;
VMC--:Oh, yes, this is a very long banner text, indeed it is. In fact, it is so long that it will probably need to apr. But it won't, because the program will truncate it;
VMC--:End of additional stuff, now back to auto-gnerated input;

VMC--VMC: New VMC state = Resetting {};
VMC--:TEST_START : TestStatusSuccess_level_2 {};
VMC--:TEST_SUCCESS : TestStatusSuccess_level_2 {};
VMC--:TEST_START : TestTubeStatusHandling {};
VMC--:TEST_SUCCESS : TestTubeStatusHandling {};
VMC--:TEST_START : TestCoinDispenserSetupReponseProcessing {};
VMC--:TEST_SUCCESS : TestCoinDispenserSetupReponseProcessing {};
VMC--:TEST_START : TestCoinDispenserStatusReponse {};
VMC--:TEST_SUCCESS : TestCoinDispenserStatusReponse {};
VMC--:TEST_START : TestPeripheralResetCoinAcceptorLevel_2 {};
VMC--VMC: S o f t   r e s e t {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Idle {};
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC--:TEST_SUCCESS : TestPeripheralResetCoinAcceptorLevel_2 {};
VMC--:TEST_START : TestPeripheralResetCoinAcceptorLevel_3 {};
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: acceptor Id;
VMC<-Coin_acceptor:Expansion (Identification) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: Feature enable;
VMC<-Coin_acceptor:Expansion (Feature Enable) ack;
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Expansion: Diagnostic Status;
VMC<-Coin_acceptor:Expansion (Diagnostic Status) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : TestPeripheralResetCoinAcceptorLevel_3 {};
VMC--:TEST_START : Reset_with_customer_credit {};
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC--VMC: Customer credit set to 110 {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: acceptor Id;
VMC<-Coin_acceptor:Expansion (Identification) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: Feature enable;
VMC<-Coin_acceptor:Expansion (Feature Enable) ack;
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Expansion: Diagnostic Status;
VMC<-Coin_acceptor:Expansion (Diagnostic Status) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 110 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 110, expecting 110    \[1 @ 10 coins (255 remain in tube)\]    \[0 @ 20 coins (56 remain in tube)\]    \[2 @ 50 coins (0 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Reset_with_customer_credit {};
VMC--VMC: Customer credit set to 0 {};
VMC--:TEST_START : Coin_vend_item_dispensed_no_credit_remains {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  1.00;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $1.00);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 2, Column 3);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Drop_sensor:Item dispensed;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Stop motor;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Coin_vend_item_dispensed_no_credit_remains {};
VMC--:TEST_START : Coin_vend_item_dispensed_credit_remains {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  1.00;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.80);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 3, Column 4);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Drop_sensor:Item dispensed;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Stop motor;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.20;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Coin_vend_item_dispensed_credit_remains {};
VMC--VMC: Customer credit set to 0 {};
VMC--:TEST_START : Vend_request_during_vending {};
VMC--VMC: Vend request ignored during vending {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  1.00;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $1.00);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 2, Column 3);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.10);
Keypad--Keypad: Purchase request ignored while dispensing item {};
VMC<-Drop_sensor:Item dispensed;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Stop motor;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Vend_request_during_vending {};
VMC--:TEST_START : Refund_request_during_vending {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  1.00;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $1.00);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 2, Column 3);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC<-Drop_sensor:Item dispensed;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Stop motor;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Refund_request_during_vending {};
VMC--:TEST_START : Vending_item_out_of_stock {};
VMC--VMC: Customer credit set to 0 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  1.00;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.80);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 3, Column 4);
VMC<-Motor:Motor stopped;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 3, Column 4);
VMC<-Motor:Motor stopped;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 3, Column 4);
VMC<-Motor:Motor stopped;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Display:Item out of stock;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Vending_item_out_of_stock {};
VMC--:TEST_START : Vend_request_with_insufficient_credit {};
VMC--VMC: Customer credit set to 0 {};
VMC--VMC: Customer credit set to 0 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Coins deposited;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.50;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.80);
Keypad--Keypad: Insufficient credit to purchase requested item {};
VMC->Display:Make alternate selection;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.10);
VMC--VMC: New VMC state = Dispensing {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Start motor (Row 1, Column 2);
VMC<-Drop_sensor:Item dispensed;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Motor:Stop motor;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.40;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Vend_request_with_insufficient_credit {};
VMC--:TEST_START : Refund_Change_from_coin_Acceptor {};
VMC--VMC: Customer credit set to 110 {};
Coin_acceptor--Coin_acceptor: Customer credit = 110 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 60);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.60;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 0 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 10 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response (busy);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 110, expecting 110    \[1 @ 10 coins (2 remain in tube)\]    \[0 @ 20 coins (1 remain in tube)\]    \[2 @ 50 coins (1 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Refund_Change_from_coin_Acceptor {};
VMC--:TEST_START : Refund_Change_from_coin_dispenser {};
VMC--:TEST_SUCCESS : Refund_Change_from_coin_dispenser {};
VMC--:TEST_START : Purchase_request_ignored_during_refund_from_coin_acceptor {};
VMC--VMC: Customer credit set to 110 {};
Coin_acceptor--Coin_acceptor: Customer credit = 110 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 60);
VMC->Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.10). Expect;
Keypad--Keypad: Purchase request ignored during refund payout {};
VMC->Display:Cash:  0.60;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 0 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 10 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response (busy);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 110, expecting 110    \[1 @ 10 coins (2 remain in tube)\]    \[0 @ 20 coins (1 remain in tube)\]    \[2 @ 50 coins (1 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Purchase_request_ignored_during_refund_from_coin_acceptor {};
VMC--:TEST_START : Purchase_request_ignored_during_refund_from_coin_dispenser {};
VMC--VMC: Customer credit set to 20 {};
Coin_dispenser_1--Coin_dispenser_1: Customer credit = 20 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Escrow (refund request);
VMC->Coin_dispenser_1:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispense Value;
VMC<-Coin_dispenser_1:Expansion (Payout) ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Payout Value Poll;
VMC<-Coin_dispenser_1:Extension (Payout Value Poll) response;
VMC<-Coin_dispenser_1:Payout value 10 (customer credit = 10);
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC<-Keypad:Select vend (cost $0.10). Expect;
Keypad--Keypad: Purchase request ignored during refund payout {};
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Payout Value Poll;
VMC<-Coin_dispenser_1:Extension (Payout Value Poll) response;
VMC<-Coin_dispenser_1:Payout value 0 (customer credit = 10);
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Payout Value Poll;
VMC<-Coin_dispenser_1:Extension (Payout Value Poll) response;
VMC<-Coin_dispenser_1:Payout value 10 (customer credit = 0);
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Payout Value Poll;
VMC<-Coin_dispenser_1:Ack (end of payout sequence);
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Payout Status;
VMC<-Coin_dispenser_1:Extension (Payput Status) response (busy);
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Payout Status;
VMC<-Coin_dispenser_1:Extension (Payout Status) response;
VMC<-Coin_dispenser_1:Payout status  Total payout was 20, expecting 20    \[2 @ 10 coins (2 remain in tube)\];
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status (after payout);
VMC<-Coin_dispenser_1:Dispenser status response;
VMC->Coin_dispenser_1:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Purchase_request_ignored_during_refund_from_coin_dispenser {};
VMC--:TEST_START : Reset_during_refund_from_coin_acceptor {};
Coin_acceptor--Coin_acceptor: Customer credit = 0 {};
VMC--VMC: Customer credit set to 110 {};
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 60);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.60;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: acceptor Id;
VMC<-Coin_acceptor:Expansion (Identification) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: Feature enable;
VMC<-Coin_acceptor:Expansion (Feature Enable) ack;
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Expansion: Diagnostic Status;
VMC<-Coin_acceptor:Expansion (Diagnostic Status) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 50 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 0 (customer credit = 10);
VMC->Coin_acceptor:Ack;
VMC->Display:Cash:  0.10;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 10 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 60, expecting 60    \[1 @ 10 coins (255 remain in tube)\]    \[0 @ 20 coins (56 remain in tube)\]    \[1 @ 50 coins (1 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : Reset_during_refund_from_coin_acceptor {};
VMC--:TEST_START : Refund_request_with_no_customer_credit {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Escrow (refund request);
VMC->Coin_dispenser_1:Ack;
VMC--:TEST_SUCCESS : Refund_request_with_no_customer_credit {};
VMC--:TEST_START : TestPollTimeoutAndRecover {};
VMC->Coin_acceptor:Poll;
Coin_acceptor--Coin_acceptor: T-response timeout {};
VMC<-Coin_acceptor:Nak;
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC--:TEST_SUCCESS : TestPollTimeoutAndRecover {};
VMC--:TEST_START : TestDataResponseTimeoutAndRecover {};
VMC--VMC: Customer credit set to 20 {};
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
Coin_acceptor--Coin_acceptor: T-response timeout {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
Coin_acceptor--Coin_acceptor: Retransmit as yet unacknowledged command {};
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 20 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 20, expecting 20    \[2 @ 10 coins (36 remain in tube)\]    \[0 @ 20 coins (255 remain in tube)\]    \[0 @ 50 coins (0 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : TestDataResponseTimeoutAndRecover {};
VMC--VMC: Customer credit set to 0 {};
VMC--:TEST_START : TestWaitForDataTimeout {};
VMC--VMC: Customer credit set to 20 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
Coin_acceptor--Coin_acceptor: Wait for data timeout {};
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: acceptor Id;
VMC<-Coin_acceptor:Expansion (Identification) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: Feature enable;
VMC<-Coin_acceptor:Expansion (Feature Enable) ack;
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Expansion: Diagnostic Status;
VMC<-Coin_acceptor:Expansion (Diagnostic Status) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Refunding {};
VMC--:TEST_SUCCESS : TestWaitForDataTimeout {};
VMC--VMC: Customer credit set to 0 {};
VMC--:TEST_START : TestWaitForResetTimer {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
Coin_acceptor--Coin_acceptor: Reset timeout {};
VMC--VMC: S o f t   r e s e t {};
VMC--VMC: New VMC state = Resetting {};
VMC->Coin_acceptor:Reset;
VMC<-Coin_acceptor:Reset ack;
VMC->Coin_dispenser_1:Reset Dispenser 1;
VMC<-Coin_dispenser_1:Reset ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Just reset;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Just reset;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Status;
VMC<-Coin_acceptor:Setup response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Coin Dispenser configuration;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: acceptor Id;
VMC<-Coin_acceptor:Expansion (Identification) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Expansion: Dispenser Id;
VMC<-Coin_dispenser_1:Expansion (Identification) response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Expansion: Feature enable;
VMC<-Coin_acceptor:Expansion (Feature Enable) ack;
VMC->Coin_dispenser_1:Expansion: Feature Enable;
VMC<-Coin_dispenser_1:Expansion (Feature Enable) ack;
VMC->Coin_acceptor:Expansion: Diagnostic Status;
VMC<-Coin_acceptor:Expansion (Diagnostic Status) response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Dispenser Status;
VMC<-Coin_dispenser_1:Dispenser Status response;
VMC->Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status;
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Manual dispense enable;
VMC<-Coin_dispenser_1:Ack;
Coin_dispenser_1--Coin_dispenser_1: Reset complete for Coin Dispenser {};
VMC->Coin_acceptor:Coin type enable;
VMC<-Coin_acceptor:Ack;
Coin_acceptor--Coin_acceptor: Reset complete for Coin Acceptor {};
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : TestWaitForResetTimer {};
VMC--:TEST_START : TestNakHandling {};
VMC--VMC: Customer credit set to 20 {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Poll;
VMC<-Coin_acceptor:Escrow (refund request);
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Refunding {};
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout;
VMC<-Coin_acceptor:Expansion (Payout) ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
Coin_acceptor--Coin_acceptor: Retransmit as yet unacknowledged command {};
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Payout value 20 (customer credit = 0);
VMC->Coin_acceptor:Ack;
VMC->Display:Please insert coins;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Value Poll;
VMC<-Coin_acceptor:Ack (end of payout sequence);
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Payout Status;
VMC<-Coin_acceptor:Extension (Payout Status) response;
VMC<-Coin_acceptor:Payout status  Total payout was 20, expecting 20    \[2 @ 10 coins (36 remain in tube)\]    \[0 @ 20 coins (255 remain in tube)\]    \[0 @ 50 coins (0 remain in tube)\];
VMC->Coin_acceptor:Ack;
VMC->Coin_dispenser_1:Poll;
VMC<-Coin_dispenser_1:Ack;
VMC->Coin_acceptor:Tube status (after payout);
VMC<-Coin_acceptor:Tube status response;
VMC->Coin_acceptor:Ack;
VMC--VMC: New VMC state = Idle {};
VMC--:TEST_SUCCESS : TestNakHandling {};
